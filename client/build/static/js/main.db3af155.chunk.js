(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,a){e.exports=a(66)},52:function(e,t,a){},63:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(40),o=a(10),c=(a(52),a(8)),s=a(68),m=a(70),i=a(27);var u=()=>{const[e,t]=Object(n.useState)(null),[a,r]=Object(n.useState)(!0),o=Object(c.g)();Object(n.useEffect)(()=>{(async()=>{try{const e=await m.a.get("http://localhost:4000/profile/current",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});t(e.data)}catch(e){console.error("Error fetching user data:",e),o.push("/login")}finally{r(!1)}})()},[o]);return a?l.a.createElement("div",null,"Loading..."):l.a.createElement("div",{className:"profile-wrapper"},l.a.createElement("h1",null,"User Profile"),e?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Name: ",e.name),l.a.createElement("p",null,"Email: ",e.email),l.a.createElement(i.a,{variant:"danger",onClick:()=>{localStorage.removeItem("token"),o.push("/login")}},"Logout")):l.a.createElement("p",null,"User data not found."))},E=a(9);var g=()=>{const[e,t]=Object(n.useState)(!1),[a,r]=Object(n.useState)(""),[o,s]=Object(n.useState)(""),u=Object(c.g)();Object(n.useEffect)(()=>{t(!!localStorage.getItem("token")),e&&(u.push("/profile"),alert("You are already logged in. Redirecting to your profile."))},[e,u]);return l.a.createElement("div",{className:"form-wrapper"},l.a.createElement(E.a,{onSubmit:e=>{e.preventDefault(),m.a.post("http://localhost:4000/users/login",{email:a,password:o}).then(e=>{localStorage.setItem("token",e.data.token),u.push("/profile")}).catch(e=>{console.error("Error:",e)})}},l.a.createElement(E.a.Group,{controlId:"Email"},l.a.createElement(E.a.Label,null,"Email"),l.a.createElement(E.a.Control,{type:"email",value:a,onChange:e=>r(e.target.value)})),l.a.createElement(E.a.Group,{controlId:"Password"},l.a.createElement(E.a.Label,null,"Password"),l.a.createElement(E.a.Control,{type:"password",value:o,onChange:e=>s(e.target.value)})),l.a.createElement(i.a,{variant:"danger",size:"lg",block:"block",type:"submit"},"Login")))};var p=e=>{let{onSwitchMode:t}=e;const[a,r]=Object(n.useState)(!1),[o,s]=Object(n.useState)(""),[u,g]=Object(n.useState)(""),[p,d]=Object(n.useState)(""),h=Object(c.g)();Object(n.useEffect)(()=>{r(!!localStorage.getItem("token")),a&&(h.push("/profile"),alert("You are already logged in. Redirecting to your profile."))},[a,h]);return l.a.createElement("div",{className:"form-wrapper"},l.a.createElement(E.a,{onSubmit:e=>{e.preventDefault(),m.a.post("http://localhost:4000/users/create-user",{name:o,email:u,password:p}).then(e=>{console.log("User created:",e.data),t()}).catch(e=>{console.error("Error:",e)}),s(""),g(""),d("")}},l.a.createElement(E.a.Group,{controlId:"Name"},l.a.createElement(E.a.Label,null,"Name"),l.a.createElement(E.a.Control,{type:"text",value:o,onChange:e=>s(e.target.value)})),l.a.createElement(E.a.Group,{controlId:"Email"},l.a.createElement(E.a.Label,null,"Email"),l.a.createElement(E.a.Control,{type:"email",value:u,onChange:e=>g(e.target.value)})),l.a.createElement(E.a.Group,{controlId:"Password"},l.a.createElement(E.a.Label,null,"Password"),l.a.createElement(E.a.Control,{type:"password",value:p,onChange:e=>d(e.target.value)})),l.a.createElement(i.a,{variant:"danger",size:"lg",block:"block",type:"submit"},"Create User")))};var d=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)([]),o=Object(c.g)();return l.a.createElement("div",null,l.a.createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search for a movie..."}),l.a.createElement("button",{onClick:async()=>{try{const t=await m.a.get("http://localhost:4000/search?term=".concat(e));r(t.data)}catch(t){console.error("Error fetching search results:",t)}}},"Search"),l.a.createElement("ul",null,a.map(e=>l.a.createElement("li",{key:e._id,onClick:()=>{return t=e._id,console.log(t),void o.push("/movies/details/".concat(t));var t},style:{cursor:"pointer"}},e.title))))};var h=e=>{let{onRate:t,movie:a}=e;const[r,o]=Object(n.useState)(0),c=1,s=10,m=Array.from({length:s},(e,t)=>t+1).map(e=>l.a.createElement("button",{key:e,className:"rating-button ".concat(r===e?"selected":""),onClick:()=>o(e)},e));return l.a.createElement("div",null,l.a.createElement("h3",null,(null===a||void 0===a?void 0:a.title)||"Movie Title"),l.a.createElement("div",{className:"rating-buttons"},m),l.a.createElement("button",{onClick:()=>{r>=c&&r<=s?t(null===a||void 0===a?void 0:a._id,r):console.error("Rating is out of bounds: ".concat(r))},disabled:0===r||!(null===a||void 0===a?void 0:a._id)},"Rate Movie"))};var v=()=>{const{id:e}=Object(c.h)(),[t,a]=Object(n.useState)(null),[r,o]=Object(n.useState)(null);if(Object(n.useEffect)(()=>{(async()=>{try{const t=await m.a.get("http://localhost:4000/movies/details/".concat(e));a(t.data)}catch(t){console.error("Error fetching movie details:",t)}})()},[e]),!t)return l.a.createElement("div",null,"Loading...");return l.a.createElement("div",null,l.a.createElement("h1",null,t.title),l.a.createElement("p",null,l.a.createElement("strong",null,"Plot:")," ",t.plot),l.a.createElement("p",null,l.a.createElement("strong",null,"Full Plot:")," ",t.fullplot),l.a.createElement("p",null,l.a.createElement("strong",null,"Genres:")," ",t.genres.join(", ")),l.a.createElement("p",null,l.a.createElement("strong",null,"Runtime:")," ",t.runtime," minutes"),l.a.createElement("p",null,l.a.createElement("strong",null,"Cast:")," ",t.cast.join(", ")),l.a.createElement("p",null,l.a.createElement("strong",null,"Languages:")," ",t.languages.join(", ")),l.a.createElement("p",null,l.a.createElement("strong",null,"Release Date:")," ",t.released?new Date(t.released).toLocaleDateString():"N/A"),l.a.createElement("p",null,l.a.createElement("strong",null,"Directors:")," ",t.directors.join(", ")),l.a.createElement("p",null,l.a.createElement("strong",null,"Writers:")," ",t.writers.join(", ")),l.a.createElement("p",null,l.a.createElement("strong",null,"Awards:")," ",t.awards?"".concat(t.awards.wins," wins, ").concat(t.awards.nominations," nominations"):"N/A"),l.a.createElement("p",null,l.a.createElement("strong",null,"Year:")," ",t.year),l.a.createElement("p",null,l.a.createElement("strong",null,"IMDB:")," ",t.imdb?"Rating: ".concat(t.imdb.rating,", Votes: ").concat(t.imdb.votes):"N/A"),l.a.createElement("p",null,l.a.createElement("strong",null,"Countries:")," ",t.countries.join(", ")),l.a.createElement("p",null,l.a.createElement("strong",null,"Type:")," ",t.type),l.a.createElement("p",null,l.a.createElement("strong",null,"Rotten Tomatoes Viewer Score:")," ",t.tomatoes&&t.tomatoes.viewer?"".concat(t.tomatoes.viewer.rating,"/10"):"N/A"),l.a.createElement("p",null,l.a.createElement("strong",null,"Number of Comments:")," ",t.num_mflix_comments),l.a.createElement(h,{movie:t,onRate:async(e,t)=>{try{const a=await m.a.post("http://localhost:4000/ratings",{movieId:e,rating:t},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Movie rated successfully:",a.data),o(t)}catch(a){console.error("Error rating movie:",a)}}}),null!==r&&l.a.createElement("p",null,"You rated this movie: ",r," / 10"))};var b=()=>{const[e,t]=Object(n.useState)(!1),[a,r]=Object(n.useState)(null),[o,s]=Object(n.useState)(!0),i=Object(c.g)();Object(n.useEffect)(()=>{t(!!localStorage.getItem("token")),u()},[]);const u=async()=>{s(!0);try{let e;e=!!localStorage.getItem("token")?"http://localhost:4000/movies/recommendation":"http://localhost:4000/movies/random";const t=await m.a.get(e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});r(t.data),console.log(a)}catch(t){console.error("Error fetching movie:",t),e||i.push("/login")}finally{s(!1)}};return o?l.a.createElement("div",null,"Loading..."):l.a.createElement("div",{className:"recommendation-wrapper"},a?l.a.createElement("div",null,l.a.createElement("h1",null,e?"Your Personalized Recommendation":"Random Movie Suggestion"),l.a.createElement("p",null,"Title: ",a.title),l.a.createElement("p",null,e?l.a.createElement(l.a.Fragment,null,"Summary: ",a.overview):l.a.createElement(l.a.Fragment,null,"Summary: ",a.plot)),a.poster_path&&l.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(a.poster_path),alt:"Poster of ".concat(a.title)})):l.a.createElement("p",null,"No movie data available."))},f=(a(62),a(63),a(69)),S=a(71);var j=()=>l.a.createElement(f.a,{bg:"dark",variant:"dark"},l.a.createElement(s.a,null,l.a.createElement(f.a.Brand,{as:o.b,to:"/"},"Movie Recommendation System"),l.a.createElement(S.a,{className:"ml-auto"},l.a.createElement(S.a.Link,{as:o.b,to:"/search"},"Search"),l.a.createElement(S.a.Link,{as:o.b,to:"/recommendation"},"Recommendations"),l.a.createElement(S.a.Link,{as:o.b,to:"/profile"},"Home"),l.a.createElement(S.a.Link,{as:o.b,to:"/login"},"Login"),l.a.createElement(S.a.Link,{as:o.b,to:"/create-user"},"Register"))));var w=function(){const[e,t]=Object(n.useState)(!1),a=Object(c.g)();return Object(n.useEffect)(()=>{localStorage.getItem("token");localStorage.removeItem("token"),t(!1)},[]),Object(n.useEffect)(()=>{e&&(a.push("/profile"),alert("You are already logged in. Redirecting to your profile."))},[e,a]),l.a.createElement("div",{className:"App"},l.a.createElement(o.a,null,l.a.createElement(j,null),l.a.createElement(s.a,null,l.a.createElement(c.d,null,l.a.createElement(c.b,{exact:!0,path:"/",component:d}),l.a.createElement(c.b,{path:"/login",component:g}),l.a.createElement(c.b,{path:"/create-user",component:p}),l.a.createElement(c.b,{path:"/profile",component:u}),l.a.createElement(c.b,{path:"/search",component:d}),l.a.createElement(c.b,{path:"/recommendation",component:b}),l.a.createElement(c.b,{path:"/movies/details/:id",component:v}),l.a.createElement(c.b,{render:()=>l.a.createElement(c.a,{to:"/"})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));const y=document.getElementById("root");Object(r.createRoot)(y).render(l.a.createElement(o.a,null,l.a.createElement(w,null))),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[44,1,2]]]);
//# sourceMappingURL=main.db3af155.chunk.js.map